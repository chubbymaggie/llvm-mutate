Manipulate LLVM assembly

This tool performs the following operations

    count | prints the total number of statements
     list | list instructions with their types and ids
      cut | deletes that numbered statement
   insert | copies the second numbered statement before the first
     swap | swaps the two numbered statements

Installation

  Copy this directory to llvm/lib/Transforms/Mutate in your llvm
  source tree, then run make from within the Mutate directory.  See
  http://llvm.org/docs/WritingAnLLVMPass.html for more information.

Examples

  First compile a source file to LLVM assembly.

    $ echo 'main(){ puts("hello"); puts("goodbye");}' \
        |clang -x c - -S -emit-llvm -o greet.ll

  See the behavior of the original.

    $ cat greet.ll|./llvm-mutate -l

    $ ./a.out
    hello
    goodbye

  Count the statements in the original program.

    $ cat greet.ll|./llvm-mutate -C -o /dev/null
    3

  Cut the first statement from this program, compile and run.

    $ cat greet.ll|./llvm-mutate -c 1 -l
    cut 1

    $ ./a.out
    goodbye

  Insert the second statement before the first.

    $ cat greet.ll|./llvm-mutate -i 1,2 -l
    replacing argument: 0x2614d78
    inserted 2 before 1

    $ ./a.out
    zsh: segmentation fault (core dumped)  ./a.out

TODO: This is a bug, shouldn't be replacing this argument.
      Should be as below.

    $ ./a.out
    goodbye
    hello
    goodbye

  Swap the first two statements.

    $ cat greet.ll|./llvm-mutate -s 1,2 -l
    swapped 1 with 2

TODO: Same bug as above.

License

  Licensed under the GPLV3, see the COPYING file in this directory for
  more information.
